### 深入理解计算机操作系统

#### 概述计算机系统

##### 1 信息就是位+上下文

shell是一个命令行解释器，它输出一个提示符等待一个命令行，然后执行这个命令。

##### 2 系统硬件组成

总线：传送字

![image-20220218211002347](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220218211002347.png)

![image-20220218211624928](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220218211624928.png)

##### 3 进程

进程是操作系统对一个正在运行的程序的抽象，在一个系统上可以同时运行多个进程，而每个进程都好像在独占使用硬件。并发运行则是说一个进程的指令和另外一个进程的指令是交错执行的。操作系统实现这种交错执行的机制称为上下文切换，此时需要保存进程的上下文，恢复新进程的上下文，然后讲控制权传递到新进程。

从一个进程转换到另外一个是操作系统的内核管理的，内核是操作系统代码常驻主存的部分。当应用程序需要操作系统的某些操作时比如读写文件，它将会执行特殊的系统调用指令，讲控制权传递给内核，然后内核执行被请求的操作并且返回应用程序。内核不是一个独立的进程，相反，他hi是系统管理全部进程所用代码和数据结构的集合。

##### 4 线程

一个进程实际上可以有多个称为线程的执行单元组成，每个线程都运行在进程的上下文中，并共享同样的代码和全局数据，由于网络服务器对并行处理的需求，线程正成为越来越重要的编程模型，因为多线程之间比多进程之间更容易共享数据，也因为线程一般来说比进程更高效。

##### 5 虚拟内存

虚拟内存是一个抽象概念，他为每个进程提供了一个假象，即每个进程都在肚子使用贮存，每个进程看到的内存都是一致的，称为虚拟地址空间。在Linux中，地址空间最上面的区域时保留给操作系统的代码和数据的，这对所有进程都是一样的。地址空间底部区域存放用户进程定义的代码和数据。

![image-20220218214606057](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220218214606057.png)

虚拟机：他提供对整个计算机的抽象，包括操作系统、处理器和程序。

#### 程序结构和执行

##### 1 信息表示和处理

ASCII字符

![image-20220222145411814](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220222145411814.png)

逻辑运算：&&  ||  ！（数字只表示逻辑的0或者1，结果为0/1），逻辑运算符&&和||能确定结果就不会对第二个参数求值，而位运算则依然会求值。

位运算：&  |  ~  ^  （作为位的运算）；

移位运算：<<  >>

逻辑右移和算数右移：填充0，但是例外的是算数右移的最高位是1所以都填充1。C语言没有明确定义算数或逻辑右移，然而实际上几乎所有编译器或者机器作何都对有符号数使用算数右移，并且许多程序员也都假设机器会使用这种右移。

另一方面对于无符号数右移必须是逻辑的。

当移位数较大时会对被移位数的位数进行求模方法来计算移位数。加减法的优先级高于移位运算

C/C++都支持有符号（默认）和无符号数，Java支持有符号数。

补码编码：

![image-20220222150736031](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220222150736031.png)

![image-20220222150920613](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220222150920613.png)

![image-20220222151431893](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220222151431893.png)

![image-20220222152645373](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220222152645373.png)

### 计算机操作系统

#### 认识操作系统

##### 简述

在硬件的基础之上,计算机安装了一层软件,这层软件能够通过响应用户输入的指令达到控制硬件的效果,从而满足用户需求,这种软件称之为 操作系统,它的任务就是为用户程序提供一个更好、更简单、更清晰的计算机模型。

我们一般常见的操作系统主要有Windows, Linux, FreeBSD 或 OS X,这种带有图形界面的操作系统被称为 图形用户界面(Graphical User Interface, GUI) ,而基于文本、命令行的通常称为Shell 。下面是我们所要探讨的操作系统的部件：

![image-20220222162304164](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220222162304164.png)

这是一个操作系统的简化图,最下面的是硬件,硬件包括芯片、电路板、磁盘、键盘、显示器等我们上面提到的设备,在硬件之上是软件。大部分计算机有两种运行模式:内核态 和 用户态,软件中最基础的部分是操作系统,它运行在 内核态 中,内核态也称为 管态 和核心态,它们都是操作系统的运行状态,只不过是不同的叫法而已。操作系统具有硬件的访问权,可以执行机器能够运行的任何指令。软件的其余部分运行在用户态下。

用户接口程序(shell 或者GUI)处于用户态中,并且它们位于用户态的最低层,允许用户运行其他程序,例如Web浏览器、电子邮件阅读器、音乐播放器等。而且,越靠近用户态的应用程序越容易编写。

##### CPU



##### 内存



![image-20220222163718277](C:\Users\001\AppData\Roaming\Typora\typora-user-images\image-20220222163718277.png)

![一个存储器层次结构的示例.jpg-111.3kB](https://images2017.cnblogs.com/blog/918357/201711/918357-20171108185206919-965641420.jpg)
